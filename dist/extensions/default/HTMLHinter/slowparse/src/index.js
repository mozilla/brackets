(function(){"use strict";var Stream=require("./Stream");var CSSParser=require("./CSSParser");var HTMLParser=require("./HTMLParser");var DOMBuilder=require("./DOMBuilder");var Slowparse={HTML_ELEMENT_NAMES:HTMLParser.prototype.voidHtmlElements.concat(HTMLParser.prototype.htmlElements.concat(HTMLParser.prototype.obsoleteHtmlElements)),CSS_PROPERTY_NAMES:CSSParser.prototype.cssProperties,replaceEntityRefs:HTMLParser.replaceEntityRefs,Stream:Stream,HTML:function(document,html,options){options=options||{};var stream=new Stream(html),domBuilder,parser,warnings=null,error=null,errorDetectors=options.errorDetectors||[],disallowActiveAttributes=typeof options.disallowActiveAttributes==="undefined"?false:options.disallowActiveAttributes;domBuilder=new DOMBuilder(document,disallowActiveAttributes);parser=new HTMLParser(stream,domBuilder);try{var _=parser.parse();if(_.warnings){warnings=_.warnings}}catch(e){if(e.parseInfo){error=e.parseInfo}else throw e}errorDetectors.forEach(function(detector){if(!error)error=detector(html,domBuilder.fragment)||null});return{document:domBuilder.fragment,contexts:domBuilder.contexts,warnings:warnings,error:error}},findError:function(html,errorDetectors){return this.HTML(document,html,errorDetectors).error}};if(typeof define!=="undefined"){define(function(){return Slowparse})}else if(typeof module!=="undefined"&&module.exports){module.exports=Slowparse}else if(typeof window!=="undefined"){window.Slowparse=Slowparse}})();